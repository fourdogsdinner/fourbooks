{"version":3,"sources":["src/common/elements/EBurmese.js","src/common/elements/EOffcanvas.js","src/common/elements/EAnimatedFlatList.js","src/assets/firebaseConfig.js","src/common/components/MenuButton.js","src/common/components/Nav.js","SafeAreaView.web.tsx","useScrollToTop.tsx","src/common/elements/EImage.js","src/common/components/Image.js","src/utils/api/images.js","src/utils/modules/shuffleArray.js","src/utils/hooks/useImages.js","src/common/screens/tab/Images.js"],"names":["EBurmese","src","className","font","useSettings","text","React","useMemo","window","knayi","fontConvert","style","whiteSpace","EOffcanvas","children","id","tabIndex","aria-labelledby","Control","data-bs-toggle","data-bs-target","aria-controls","Header","type","data-bs-dismiss","aria-label","Body","EAnimatedFlatList","data","renderItem","separatorHeight","headerHeight","NavComponent","keyExtractor","contentContainerStyle","ref","useRef","useScrollToTop","getKeys","useCallback","_","index","toString","Separator","height","scrollY","Animated","Value","current","clampedScrollY","interpolate","inputRange","outputRange","extrapolateLeft","y","diffClamp","onScroll","event","nativeEvent","contentOffset","useNativeDriver","length","flex","FlatList","paddingTop","ItemSeparatorComponent","scrollEventThrottle","View","transform","translateY","position","top","start","end","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","store","firestore","db","database","MenuButton","EIcon","name","Nav","title","headerRight","ZawgyiUnicodeConverter","headerLeft","zIndex","edgeBitmaskMap","right","bottom","left","SafeAreaView","rest","insets","useSafeAreaInsets","edgeBitmask","edges","accum","appliedStyle","insetTop","insetRight","insetBottom","insetLeft","flatStyle","StyleSheet","mode","margin","marginVertical","marginHorizontal","marginTop","marginRight","marginBottom","marginLeft","padding","paddingVertical","paddingHorizontal","paddingRight","paddingBottom","paddingLeft","navigation","useNavigation","route","useRoute","e","isFocused","isFirst","requestAnimationFrame","scrollable","getScrollableNode","x","animated","offset","EImage","onPress","placeholderHeight","url","useState","loaded","setLoaded","width","screen","availWidth","availHeight","onLoad","onClick","maxWidth","maxHeight","Image","handlePress","bind","this","props","navigate","item","PureComponent","getDataFromServerAsync","a","async","collection","doc","get","raw","res","timestamp","console","log","code","shuffleArray","array","copyArray","i","j","Math","floor","random","temp","initialState","error","Images","images","state","setState","useStorage","getItem","setItem","setData","prev","slice","getInitialData","useEffect","useImages","Refresh"],"mappings":"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","file":"static/js/4.1778fdf0.chunk.js","sourcesContent":["import React from \"react\";\r\nimport useSettings from \"~/utils/hooks/useSettings\";\r\n\r\nexport default function EBurmese({ src, className }) {\r\n  const { font } = useSettings();\r\n\r\n  const text = React.useMemo(\r\n    () => window.knayi.fontConvert(src, font),\r\n    [src, font]\r\n  );\r\n\r\n  return (\r\n    <span className={className} style={{ whiteSpace: \"pre-wrap\" }}>\r\n      {text}\r\n    </span>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function EOffcanvas({ children, className, id }) {\r\n  return (\r\n    <div\r\n      className={\"offcanvas offcanvas-start \" + className}\r\n      tabIndex=\"-1\"\r\n      id={`${id}`}\r\n      aria-labelledby={`${id}Label`}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst Header = ({ className, children }) => (\r\n  <div className={\"offcanvas-header \" + className}>\r\n    <h5 className=\"offcanvas-title\" id=\"offcanvasExampleLabel\">\r\n      {children}\r\n    </h5>\r\n    <button\r\n      type=\"button\"\r\n      className=\"btn-close\"\r\n      data-bs-dismiss=\"offcanvas\"\r\n      aria-label=\"Close\"\r\n    ></button>\r\n  </div>\r\n);\r\n\r\nconst Body = ({ children, className }) => (\r\n  <div className={\"offcanvas-body \" + className}>{children}</div>\r\n);\r\n\r\nconst Control = ({ id, children, className }) => (\r\n  <div\r\n    className={className}\r\n    data-bs-toggle=\"offcanvas\"\r\n    data-bs-target={`#${id}`}\r\n    aria-controls={id}\r\n  >\r\n    {children}\r\n  </div>\r\n);\r\n\r\nEOffcanvas.Control = Control;\r\nEOffcanvas.Header = Header;\r\nEOffcanvas.Body = Body;\r\n","import { useScrollToTop } from \"@react-navigation/native\";\r\nimport React from \"react\";\r\nimport { Animated } from \"react-native\";\r\nimport { SafeAreaView } from \"react-native-safe-area-context\";\r\nimport ELoading from \"~/common/elements/ELoading\";\r\n\r\nexport default function EAnimatedFlatList({\r\n  data = [],\r\n  renderItem,\r\n  separatorHeight = 8,\r\n  headerHeight = 64,\r\n  NavComponent,\r\n  keyExtractor,\r\n  contentContainerStyle,\r\n}) {\r\n  // Scroll To Top\r\n  const ref = React.useRef(null);\r\n  useScrollToTop(ref);\r\n\r\n  const getKeys = React.useCallback((_, index) => index.toString(), []);\r\n\r\n  const Separator = React.useCallback(\r\n    () => <div style={{ height: separatorHeight }} />,\r\n    [separatorHeight]\r\n  );\r\n\r\n  // Show & Hide Navigation On scroll\r\n  const scrollY = React.useRef(new Animated.Value(0)).current;\r\n  const clampedScrollY = scrollY.interpolate({\r\n    inputRange: [0, 1],\r\n    outputRange: [0, 1],\r\n    extrapolateLeft: \"clamp\",\r\n  });\r\n  const scrollYClamped = Animated.diffClamp(clampedScrollY, 0, headerHeight);\r\n  const y = scrollYClamped.interpolate({\r\n    inputRange: [0, headerHeight],\r\n    outputRange: [0, -headerHeight],\r\n  });\r\n  const onScroll = Animated.event(\r\n    [{ nativeEvent: { contentOffset: { y: scrollY } } }],\r\n    { useNativeDriver: true }\r\n  );\r\n\r\n  if (data.length === 0) {\r\n    return <ELoading />;\r\n  }\r\n\r\n  return (\r\n    <SafeAreaView style={{ flex: 1 }}>\r\n      <Animated.FlatList\r\n        ref={ref}\r\n        contentContainerStyle={[\r\n          {\r\n            paddingTop: headerHeight + separatorHeight,\r\n          },\r\n          contentContainerStyle,\r\n        ]}\r\n        ItemSeparatorComponent={Separator}\r\n        data={data}\r\n        renderItem={renderItem}\r\n        keyExtractor={keyExtractor || getKeys}\r\n        onScroll={onScroll}\r\n        scrollEventThrottle={16}\r\n      />\r\n      <Animated.View\r\n        style={{\r\n          transform: [{ translateY: y }],\r\n          position: \"absolute\",\r\n          top: 0,\r\n          start: 0,\r\n          end: 0,\r\n          height: headerHeight,\r\n        }}\r\n      >\r\n        {NavComponent}\r\n      </Animated.View>\r\n    </SafeAreaView>\r\n  );\r\n}\r\n","import {\r\n  apiKey,\r\n  databaseURL,\r\n  authDomain,\r\n  projectId,\r\n  messagingSenderId,\r\n  appId,\r\n  storageBucket,\r\n} from \"@env\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: apiKey,\r\n  authDomain: authDomain,\r\n  databaseURL: databaseURL,\r\n  projectId: projectId,\r\n  storageBucket: storageBucket,\r\n  messagingSenderId: messagingSenderId,\r\n  appId: appId,\r\n};\r\n\r\nwindow.firebase.initializeApp(firebaseConfig);\r\n\r\nexport const store = window.firebase.firestore();\r\n\r\nexport const db = window.firebase.database();\r\n","import React from \"react\";\r\nimport EIcon from \"../elements/EIcon\";\r\nimport EOffcanvas from \"../elements/EOffcanvas\";\r\n\r\nexport default function MenuButton() {\r\n  return (\r\n    <EOffcanvas.Control className=\"btn btn-primary btn-sm\" id={\"bookTitles\"}>\r\n      <EIcon name={\"list\"} />\r\n    </EOffcanvas.Control>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport EBurmese from \"../elements/EBurmese\";\r\nimport MenuButton from \"./MenuButton\";\r\nimport ZawgyiUnicodeConverter from \"./ZawgyiUnicodeConverter\";\r\n\r\nexport default function Nav({\r\n  title = \"FourBooks\",\r\n  headerRight = <ZawgyiUnicodeConverter />,\r\n  headerLeft,\r\n}) {\r\n  return (\r\n    <nav\r\n      style={{ height: 64, zIndex: 99999 }}\r\n      className={\"navbar bg-primary navbar-dark shadow\"}\r\n    >\r\n      <div className=\"container-fluid\">\r\n        {headerLeft || <MenuButton />}\r\n        <div className=\"navbar-brand fw-bold\">\r\n          <EBurmese src={title} />\r\n        </div>\r\n        {headerRight}\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","import * as React from 'react';\nimport { View, StyleSheet } from 'react-native';\nimport { useSafeAreaInsets } from './SafeAreaContext';\nimport type { Edge, NativeSafeAreaViewProps } from './SafeArea.types';\n\n// prettier-ignore\nconst TOP    = 0b1000,\n      RIGHT  = 0b0100,\n      BOTTOM = 0b0010,\n      LEFT   = 0b0001,\n      ALL    = 0b1111;\n\n/* eslint-disable no-bitwise */\n\nconst edgeBitmaskMap: Record<Edge, number> = {\n  top: TOP,\n  right: RIGHT,\n  bottom: BOTTOM,\n  left: LEFT,\n};\n\nexport function SafeAreaView({\n  style = {},\n  mode,\n  edges,\n  ...rest\n}: NativeSafeAreaViewProps) {\n  const insets = useSafeAreaInsets();\n\n  const edgeBitmask =\n    edges != null\n      ? edges.reduce((accum, edge) => accum | edgeBitmaskMap[edge], 0)\n      : ALL;\n\n  const appliedStyle = React.useMemo(() => {\n    const insetTop = edgeBitmask & TOP ? insets.top : 0;\n    const insetRight = edgeBitmask & RIGHT ? insets.right : 0;\n    const insetBottom = edgeBitmask & BOTTOM ? insets.bottom : 0;\n    const insetLeft = edgeBitmask & LEFT ? insets.left : 0;\n\n    const flatStyle = StyleSheet.flatten(style) as Record<string, number>;\n\n    if (mode === 'margin') {\n      const {\n        margin = 0,\n        marginVertical = margin,\n        marginHorizontal = margin,\n        marginTop = marginVertical,\n        marginRight = marginHorizontal,\n        marginBottom = marginVertical,\n        marginLeft = marginHorizontal,\n      } = flatStyle;\n\n      const marginStyle = {\n        marginTop: marginTop + insetTop,\n        marginRight: marginRight + insetRight,\n        marginBottom: marginBottom + insetBottom,\n        marginLeft: marginLeft + insetLeft,\n      };\n\n      return [style, marginStyle];\n    } else {\n      const {\n        padding = 0,\n        paddingVertical = padding,\n        paddingHorizontal = padding,\n        paddingTop = paddingVertical,\n        paddingRight = paddingHorizontal,\n        paddingBottom = paddingVertical,\n        paddingLeft = paddingHorizontal,\n      } = flatStyle;\n\n      const paddingStyle = {\n        paddingTop: paddingTop + insetTop,\n        paddingRight: paddingRight + insetRight,\n        paddingBottom: paddingBottom + insetBottom,\n        paddingLeft: paddingLeft + insetLeft,\n      };\n\n      return [style, paddingStyle];\n    }\n  }, [style, insets, mode, edgeBitmask]);\n\n  return <View style={appliedStyle} {...rest} />;\n}\n","import { EventArg, useNavigation, useRoute } from '@react-navigation/core';\nimport * as React from 'react';\n\ntype ScrollOptions = { x?: number; y?: number; animated?: boolean };\n\ntype ScrollableView =\n  | { scrollToTop(): void }\n  | { scrollTo(options: ScrollOptions): void }\n  | { scrollToOffset(options: { offset?: number; animated?: boolean }): void }\n  | { scrollResponderScrollTo(options: ScrollOptions): void };\n\ntype ScrollableWrapper =\n  | { getScrollResponder(): React.ReactNode }\n  | { getNode(): ScrollableView }\n  | ScrollableView;\n\nfunction getScrollableNode(ref: React.RefObject<ScrollableWrapper>) {\n  if (ref.current == null) {\n    return null;\n  }\n\n  if (\n    'scrollToTop' in ref.current ||\n    'scrollTo' in ref.current ||\n    'scrollToOffset' in ref.current ||\n    'scrollResponderScrollTo' in ref.current\n  ) {\n    // This is already a scrollable node.\n    return ref.current;\n  } else if ('getScrollResponder' in ref.current) {\n    // If the view is a wrapper like FlatList, SectionList etc.\n    // We need to use `getScrollResponder` to get access to the scroll responder\n    return ref.current.getScrollResponder();\n  } else if ('getNode' in ref.current) {\n    // When a `ScrollView` is wraped in `Animated.createAnimatedComponent`\n    // we need to use `getNode` to get the ref to the actual scrollview.\n    // Note that `getNode` is deprecated in newer versions of react-native\n    // this is why we check if we already have a scrollable node above.\n    return ref.current.getNode();\n  } else {\n    return ref.current;\n  }\n}\n\nexport default function useScrollToTop(\n  ref: React.RefObject<ScrollableWrapper>\n) {\n  const navigation = useNavigation();\n  const route = useRoute();\n\n  React.useEffect(() => {\n    let current = navigation;\n\n    // The screen might be inside another navigator such as stack nested in tabs\n    // We need to find the closest tab navigator and add the listener there\n    while (current && current.getState().type !== 'tab') {\n      current = current.getParent();\n    }\n\n    if (!current) {\n      return;\n    }\n\n    const unsubscribe = current.addListener(\n      // We don't wanna import tab types here to avoid extra deps\n      // in addition, there are multiple tab implementations\n      // @ts-expect-error\n      'tabPress',\n      (e: EventArg<'tabPress', true>) => {\n        // We should scroll to top only when the screen is focused\n        const isFocused = navigation.isFocused();\n\n        // In a nested stack navigator, tab press resets the stack to first screen\n        // So we should scroll to top only when we are on first screen\n        const isFirst =\n          navigation === current ||\n          navigation.getState().routes[0].key === route.key;\n\n        // Run the operation in the next frame so we're sure all listeners have been run\n        // This is necessary to know if preventDefault() has been called\n        requestAnimationFrame(() => {\n          const scrollable = getScrollableNode(ref) as ScrollableWrapper;\n\n          if (isFocused && isFirst && scrollable && !e.defaultPrevented) {\n            if ('scrollToTop' in scrollable) {\n              scrollable.scrollToTop();\n            } else if ('scrollTo' in scrollable) {\n              scrollable.scrollTo({ x: 0, y: 0, animated: true });\n            } else if ('scrollToOffset' in scrollable) {\n              scrollable.scrollToOffset({ offset: 0, animated: true });\n            } else if ('scrollResponderScrollTo' in scrollable) {\n              scrollable.scrollResponderScrollTo({ y: 0, animated: true });\n            }\n          }\n        });\n      }\n    );\n\n    return unsubscribe;\n  }, [navigation, ref, route.key]);\n}\n","import React from \"react\";\r\n\r\nexport default function EImage({\r\n  className,\r\n  onPress,\r\n  placeholderHeight = 500,\r\n  url,\r\n}) {\r\n  const [loaded, setLoaded] = React.useState(false);\r\n  const width =\r\n    window.screen.availWidth >= 400 ? 400 : window.screen.availWidth;\r\n  const height = window.screen.availHeight;\r\n\r\n  const onLoad = React.useCallback(() => {\r\n    setLoaded(true);\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      className={`bg-secondary align-items-center d-flex justify-content-center ${className}`}\r\n      onClick={onPress}\r\n    >\r\n      <img\r\n        src={url}\r\n        width={\"100%\"}\r\n        height={loaded ? \"100%\" : placeholderHeight}\r\n        onLoad={onLoad}\r\n        style={{\r\n          maxWidth: width + \"px\",\r\n          maxHeight: height + \"px\",\r\n          margin: \"auto\",\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport EImage from \"~/common/elements/EImage\";\r\n\r\nexport default class Image extends React.PureComponent {\r\n  constructor() {\r\n    super();\r\n    this.handlePress = this.handlePress.bind(this);\r\n  }\r\n\r\n  handlePress() {\r\n    this.props.navigation.navigate(\"ImageViewer\", { url: this.props.item });\r\n  }\r\n\r\n  render() {\r\n    const { item } = this.props;\r\n\r\n    return (\r\n      <EImage\r\n        url={`https://drive.google.com/uc?authuser=0&id=${item}&export=download`}\r\n        onPress={this.handlePress}\r\n      />\r\n    );\r\n  }\r\n}\r\n","import { store } from \"~/assets/firebaseConfig\";\r\n\r\nconst getDataFromServerAsync = async (data) => {\r\n  if (data) return data;\r\n\r\n  try {\r\n    const raw = await store.collection(\"Dashboard\").doc(\"Images\").get();\r\n    const res = raw.data();\r\n\r\n    return res.timestamp === data?.timestamp ? data : res;\r\n  } catch (error) {\r\n    console.log(error.code);\r\n    return data;\r\n  }\r\n};\r\n\r\nexport default getDataFromServerAsync;\r\n","export default function shuffleArray(array) {\r\n  const copyArray = [...array];\r\n\r\n  for (var i = copyArray.length - 1; i > 0; i--) {\r\n    var j = Math.floor(Math.random() * (i + 1));\r\n    var temp = copyArray[i];\r\n    copyArray[i] = copyArray[j];\r\n    copyArray[j] = temp;\r\n  }\r\n\r\n  return copyArray;\r\n}\r\n","import React from \"react\";\r\nimport getDataFromServerAsync from \"../api/images\";\r\nimport shuffleArray from \"../modules/shuffleArray\";\r\nimport useStorage from \"./useStorage\";\r\n\r\nconst initialState = {\r\n  data: [],\r\n  error: false,\r\n};\r\n\r\nexport default function useImages() {\r\n  const [state, setState] = React.useState(initialState);\r\n  const { getItem, setItem } = useStorage(\"@images\");\r\n\r\n  // On start of component\r\n  const setData = React.useCallback((data) => {\r\n    setState((prev) => ({\r\n      ...prev,\r\n      data: shuffleArray(data).slice(0, 500),\r\n    }));\r\n  }, []);\r\n\r\n  const getInitialData = React.useCallback(async () => {\r\n    setState(initialState);\r\n\r\n    const item = getItem();\r\n    const res = await getDataFromServerAsync(item);\r\n\r\n    if (res) {\r\n      setData(res.data);\r\n      return setItem(res);\r\n    }\r\n\r\n    return setItem((prev) => ({ ...prev, error: true }));\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    getInitialData();\r\n  }, []);\r\n\r\n  return { data: state.data, error: state.error, getInitialData };\r\n}\r\n","import { useNavigation } from \"@react-navigation/native\";\r\nimport React from \"react\";\r\nimport Image from \"~/common/components/Image\";\r\nimport Nav from \"~/common/components/Nav\";\r\nimport EAnimatedFlatList from \"~/common/elements/EAnimatedFlatList\";\r\nimport EIcon from \"~/common/elements/EIcon\";\r\nimport useImages from \"~/utils/hooks/useImages\";\r\n\r\nexport default function Images() {\r\n  const images = useImages();\r\n  const navigation = useNavigation();\r\n\r\n  const renderItem = React.useCallback(\r\n    ({ item }) => <Image navigation={navigation} item={item} />,\r\n    []\r\n  );\r\n\r\n  const keyExtractor = React.useCallback((item) => item.toString(), []);\r\n\r\n  const Refresh = React.useCallback(\r\n    () => (\r\n      <button\r\n        onClick={images.getInitialData}\r\n        type=\"button\"\r\n        className=\"btn btn-sm text-light\"\r\n      >\r\n        <EIcon name={\"arrow-clockwise\"} />\r\n      </button>\r\n    ),\r\n    []\r\n  );\r\n\r\n  return (\r\n    <EAnimatedFlatList\r\n      data={images.data}\r\n      renderItem={renderItem}\r\n      keyExtractor={keyExtractor}\r\n      NavComponent={<Nav headerRight={<Refresh />} headerLeft={null} />}\r\n    />\r\n  );\r\n}\r\n"],"sourceRoot":""}